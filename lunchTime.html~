<!-- simple-todos.html -->
<head>
  <title>Lunch order!!</title>
</head>

<body>
  <div class="container">
<header>
  <h1>Lunch order!!</h1>
    <li>
	    <div class="well">
	      {{> picker}}
	    </div>
	    <div class="row">
	      <div class="col-md-6">
		<p class="alert alert-info">Just Uploaded</p>
		{{> lister}}
	      </div>
	      <div class="col-md-6">
		<p class="alert alert-info">Today's Menu</p>
		{{> stored}}
	      </div>
	    </div>
    </li>
  <!-- add a form below the h1 -->
	<div width="800px" margin="0 auto">
		<div width="200px" margin-left="200px" background="red">
			{{> countdown}} 
		</div>
		<div>
			<form class="new-order">
				<input type="text" name="name" placeholder="Name" />
				<input type="text" name="dish" placeholder="What to eat" />
				<input type="text" name="price" placeholder="Price" />
				<button class="place_order">Add order</button>
			</form>
		</div>
	</div>
	</header>
	<li>
		<table style="width:95%" class="table table-striped" table-layout="fixed">
		    <col width="25%" />
		    <col width="25%" />
		    <col width="25%" />
		    <col width="25%" />
			<tr>
				<th>Dish</th><th>Count</th><th>Orderer</th><th>Cost</th>
			</tr>
				{{#each arrayify conclusion}}
				<tr><td>{{Dish}}</td><td>{{Count}}</td><td>{{Orderer}}</td><td>{{Cost}}</td></tr>
				{{/each}}
			<tr>
				<th colspan="4">Total cost is: {{total}} NTD</th>
			</tr>
			<tr>
				<th colspan="4">Total orders: {{order_count}}</th>
			</tr>
		</table>
	</li>

	<li>
		<table style="width:95%" class="table table-striped">
			<tr>
				<th>Name</th><th>Dish</th><th>Price</th><th></th>
			</tr>
			{{#each orders}}
				{{> order}}
			{{/each}}
		</table>
		<header>
				<h1>User credit management</h1>
					<form class="admin-query">
						<input type="text" name="user-name" placeholder="Name" />
						{{> people}}
						<button class="query">Check summary</button>
					</form>
					<table>

					</table>
					<form class="admin-management">
						<input type="text" name="user_name" placeholder="Name" />
						<input type="text" name="user_amount" placeholder="How much?" />
						<button class="add_credit">Add credit</button>
					</form>
		</header>
	</li>
		<header>
			<div>
				<li>

				</li>
			</div>
		</header>
	</div>

<div>
	{{> chatroom}}
</div>

</body>





<template name="task">
  <li class="{{#if checked}}checked{{/if}}">
    <button class="delete">&times;</button>

    <input type="checkbox" checked="{{checked}}" class="toggle-checked" />

    <span class="text">{{text}}</span>
  </li>
</template>


<template name="order">
		<tr>
			<td>{{name}}</td><td>{{dish}}</td><td>{{price}}</td><td><button class="delete">&times;</button></td>
		</tr>
		
</template>

<template name="people">
	<select name="people_selector">
		{{#each users}}
			<option value={{user_name}}>{{user_name}}</option>
		{{/each}}
	</select>
</template> 

<template name="summary">
	<tr>

	<td>this is summary: {{total}}</td>

	</tr>
</template>


<template name="chatroom">
	<div style="overflow-y:scroll;" class="inner" id="message">
	{{#each posts}}
		<div>
			<span style="color:yellow;">{{author}}: </span>
			<span style="color:white;">{{text}}</span>
		</div>
	{{/each}}
	</div>
	<hr>
	<div class="pos_fixed">
		<form class="form-horizontal" role="form" position="fixed">
			<div class="form-group">
				<div class="col-sm-10">
					<input class="form-control" name="author" type="text" placeholder="Author">
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-10">
			<input class="form-control" name="chat_text" type="text" value="{{chat_text}}" placeholder="Message">
				</div>
			</div>
		<button class="send">Send</button>
		</form>
	</div>
</template>


<template name="pickerArea">
  <div id="picker-area">
    <input type="filepicker-dragdrop"
    data-fp-apikey="AlYuPfsxZR6SA1MLnywccz"
    data-fp-mimetypes="image/*"
    data-fp-button-class="btn btn-primary"
    data-fp-drag-class="fpdrag"
    data-fp-container="modal"
    data-fp-multiple="true"
    onchange="Session.set('fpfiles', event.fpfiles);">
  </div>
</template>

<template name="picker">
{{#if apikey}}
  {{#if fploaded}}
    <div class="row">
      <div class="col-md-8">
        {{> pickerArea}}
      </div>
      <div class="col-md-4 text-right">
        <a class="btn btn-default btn-sm forget" href="#">Forget API Key</a>
      </div>
    </div>
  {{else}}
    loading...
  {{/if}}
{{else}}
  <form action="?" id="apikeyform" role="form" class="form-inline">
    <div class="form-group">
      <label>
        <label class="sr-only" for="apikey">API Key</label>
        <input class="form-control" type="text" id="apikey" placeholder="API Key Here..." style="min-width:300px;">
      </label>
      <div class="btn-group">
        <button type="submit" class="btn btn-primary">Store API Key</button>
        <a href="https://www.filepicker.io/" class="btn btn-link" target="_blank">Get One</a>
      </div>
    </div>
  </form>
{{/if}}
</template>


<template name="lister">
{{#each files}}
<p>
<a href="#" class="store btn btn-primary pull-right">
  <span class="glyphicon glyphicon-download"></span>
  store
</a>
<strong>{{filename}}</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp; <em>{{mimetype}}</em><br>
&nbsp;&nbsp;&nbsp;&nbsp; <em>{{size}}</em><br>
&nbsp;&nbsp;&nbsp;&nbsp; {{url}}<br>
{{#if isImg}}
<img src="{{url}}"><br>
{{/if}}
</p>
{{/each}}
</template>

<template name="stored">
{{#each files}}
<p>
<a href="#" class="forget btn btn-danger pull-right">
  <span class="glyphicon glyphicon-remove"></span>
  forget
</a>
<!--
<strong>{{filename}}</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp; <em>{{mimetype}}</em><br>
&nbsp;&nbsp;&nbsp;&nbsp; <em>{{size}}</em><br>
&nbsp;&nbsp;&nbsp;&nbsp; {{url}}<br>
-->
{{#if isImg}}
<img src="{{url}}"><br>
{{/if}}
</p>
{{/each}}
</template>

<template name="countdown">
<p><strong>Order before 10:50! ({{time}} seconds left)</strong></p>
</template>
